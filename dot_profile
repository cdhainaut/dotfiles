# ~/.profile: executed by the command interpreter for login shells.
# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login
# exists.
# see /usr/share/doc/bash/examples/startup-files for examples.
# the files are located in the bash-doc package.

# the default umask is set in /etc/profile; for setting the umask
# for ssh logins, install and configure the libpam-umask package.
#umask 022

# if running bash
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
	. "$HOME/.bashrc"
    fi
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/.local/bin" ] ; then
    PATH="$HOME/.local/bin:$PATH"
fi


export work="/mnt/data/Work"
export dev="$work/CDYYY-Dev"
export pyutils="$dev/python-utils"
export LC_NUMERIC="en_US.UTF-8"

if [[ $- == *i* ]]; then
  [ -f /usr/share/doc/fzf/examples/key-bindings.zsh ] && source /usr/share/doc/fzf/examples/key-bindings.zsh
  [ -f /usr/share/doc/fzf/examples/completion.zsh ]   && source /usr/share/doc/fzf/examples/completion.zsh
  autoload -Uz compinit && compinit
fi


pj() {
    # Find only directories, max depth 1, skip WORK_DIR itself
    local proj
    proj=$(find "$work" -mindepth 1 -maxdepth 3 -type d | sort | fzf --prompt="Select project: " --height=40% --reverse)

    if [ -n "$proj" ]; then
        cd "$proj" || return
        echo "üìÇ Jumped to: $proj"
    else
        echo "‚ùå No project selected."
    fi
}

function y() {
	local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
	yazi "$@" --cwd-file="$tmp"
	IFS= read -r -d '' cwd < "$tmp"
	[ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
	rm -f -- "$tmp"
}
# Jump to a project by code
# pj() {
#     cd "$work"/"$1"* 2>/dev/null || echo "Project $1 not found"
# }

# # Autocomplete project codes
# _pj_autocomplete() {
#     COMPREPLY=($(compgen -W "$(basename -a "$work"/*)" -- "${COMP_WORDS[1]}"))
# }
# complete -F _pj_autocomplete pj

## Yabridge

export PATH="$PATH:$HOME/.local/share/yabridge"

# XFoil

export PATH="$PATH:/home/codes/bin"

#chezmoi
export PATH="$HOME/.local/bin:$PATH"


# Go
export PATH="$PATH:$HOME/go/bin"

# Helix
# 
if [ -f "$HOME/.private_keys" ]; then
    . "$HOME/.private_keys"
fi
export HANDLER=copilot
#export HANDLER=codeium
export HELIX_RUNTIME=~/src/helix/runtime

# Conda shorthand
alias ca="conda activate"

## StarCCM+

alias star13="/opt/CD-adapco/13.04.011-R8/STAR-CCM+13.04.011-R8/star/bin/starccm+"
export CDLMD_LICENSE_FILE="/home/charles/Documents/license.dat"

#export LD_PRELOAD="/usr/lib/x86_64-linux-gnu/libstdc++.so.6"
. "$HOME/.cargo/env"
